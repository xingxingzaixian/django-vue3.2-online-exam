var N=(Q,d,_)=>new Promise((e,i)=>{var f=n=>{try{c(_.next(n))}catch(p){i(p)}},v=n=>{try{c(_.throw(n))}catch(p){i(p)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(f,v);c((_=_.apply(Q,d)).next())});import{I as Y,J as $,s as G,u as H,K as P,L as X,M as Z,t as ee}from"./element-plus.d18fd549.js";import{d as te,Y as E,r as le,x as h,o as m,c as y,a as B,U as O,u as l,b as u,R as s,K as w,L as A,O as C,a3 as F,Q as L,a0 as I}from"./@vue.e7449577.js";import{a as oe,u as ue}from"./vue-router.c4a42318.js";import{W as D}from"./WangEditor.9ec4e665.js";import{e as ae,f as se,h as ie,a as R,i as ne,j as pe,k as de}from"./index.3fc3be57.js";import{s as q}from"./message.bd14f5eb.js";import{_ as re}from"./index.9d191a4c.js";import"./@vueuse.61020c9f.js";import"./dayjs.bfe651f5.js";import"./axios.70cb0bcf.js";import"./@element-plus.e118e8a4.js";import"./lodash-es.da5d5253.js";import"./async-validator.5d25c98b.js";import"./@ctrl.82a509e0.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./@popperjs.da6c49cb.js";import"./normalize-wheel-es.1c4ac15a.js";import"./@wangeditor.9c5418dd.js";import"./pinia.9c2a34da.js";import"./vue-demi.b3a9cad9.js";import"./@icon-park.216eeacb.js";/* empty css                    */const me={class:"edit"},_e={class:"form"},ce={class:"question"},Ee={class:"step"},ge=I("\u4E0A\u4E00\u6B65"),fe=te({setup(Q){const d=oe(),_=ue(),e=E({content:"",description:"",option_ids:[],anser_ids:[],level_tag:"",type_tag:"",category_tag:""}),i=le(0),f=!!(d.params&&d.params.id),v=E([]),c=E([]),n=E([]),p=E([]),S=E({total:0,pageNo:1,pageSize:500}),T=h(()=>d.meta.title),K=h(()=>i.value>=2?"\u63D0\u4EA4":"\u4E0B\u4E00\u6B65");ae().then(o=>{n.push(...o)}),se().then(o=>{v.push(...o)}),ie().then(o=>{c.push(...o)}),R(S).then(o=>{p.splice(0,p.length,...o.results)});const M=o=>{R(S,{content__icontains:o}).then(a=>{p.splice(0,p.length,...a.results)})},W=h(()=>p.map(o=>({label:o.content,value:o.id}))),j=h(()=>e.option_ids.map(o=>{const a=p.find(g=>g.id===o);if(a)return{label:a.content,value:a.id}})),z=()=>N(this,null,function*(){i.value===2?(f?(yield pe(Number(d.params.id),e),q("\u66F4\u65B0\u6210\u529F")):(yield de(e),q("\u6DFB\u52A0\u6210\u529F")),_.push({name:"Question"})):i.value+=1});return f&&ne(Number(d.params.id)).then(o=>{e.content=o.content,e.description=o.description,e.option_ids=o.option_ids,e.anser_ids=o.anser_ids,e.level_tag=o.level_tag,e.type_tag=o.type_tag,e.category_tag=o.category_tag}),(o,a)=>{const g=Y,J=$,r=G,b=H,x=P,V=X,k=Z,U=ee;return m(),y("div",me,[B("h1",null,O(l(T)),1),B("div",_e,[u(J,{active:i.value,"align-center":"","finish-status":"success",class:"step"},{default:s(()=>[u(g,{title:"\u9898\u76EE\u5185\u5BB9",description:"\u586B\u5199\u9898\u76EE\u4FE1\u606F"}),u(g,{title:"\u9898\u76EE\u5206\u7C7B\u4FE1\u606F",description:"\u7C7B\u578B\u3001\u5206\u7C7B\u3001\u96BE\u5EA6"}),u(g,{title:"\u9898\u76EE\u9009\u9879",description:"\u9898\u76EE\u9009\u9879\u548C\u7B54\u6848"})]),_:1},8,["active"]),B("div",ce,[w(u(b,{model:l(e),"label-width":"50px"},{default:s(()=>[u(r,{label:"\u5185\u5BB9"},{default:s(()=>[u(D,{html:l(e).content,"onUpdate:html":a[0]||(a[0]=t=>l(e).content=t),mode:"simple",style:{"min-width":"800px"}},null,8,["html"])]),_:1}),u(r,{label:"\u63CF\u8FF0"},{default:s(()=>[u(D,{html:l(e).description,"onUpdate:html":a[1]||(a[1]=t=>l(e).description=t),mode:"simple",style:{"min-width":"800px"}},null,8,["html"])]),_:1})]),_:1},8,["model"]),[[A,i.value===0]]),w(u(b,{model:l(e),"label-width":"50px"},{default:s(()=>[u(r,{label:"\u5206\u7C7B"},{default:s(()=>[u(V,{modelValue:l(e).category_tag,"onUpdate:modelValue":a[2]||(a[2]=t=>l(e).category_tag=t),placeholder:"\u9009\u62E9\u9898\u76EE\u5206\u7C7B",style:{width:"240px"}},{default:s(()=>[(m(!0),y(C,null,F(l(v),t=>(m(),L(x,{key:t.tag,label:t.name,value:t.tag},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u96BE\u5EA6"},{default:s(()=>[u(V,{modelValue:l(e).level_tag,"onUpdate:modelValue":a[3]||(a[3]=t=>l(e).level_tag=t),placeholder:"\u9009\u62E9\u9898\u76EE\u96BE\u5EA6",style:{width:"240px"}},{default:s(()=>[(m(!0),y(C,null,F(l(c),t=>(m(),L(x,{key:t.tag,label:t.name,value:t.tag},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u7C7B\u578B"},{default:s(()=>[u(V,{modelValue:l(e).type_tag,"onUpdate:modelValue":a[4]||(a[4]=t=>l(e).type_tag=t),placeholder:"\u9009\u62E9\u9898\u76EE\u7C7B\u578B",style:{width:"240px"}},{default:s(()=>[(m(!0),y(C,null,F(l(n),t=>(m(),L(x,{key:t.tag,label:t.name,value:t.tag},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),[[A,i.value===1]]),w(u(b,{model:l(e),"label-width":"50px"},{default:s(()=>[u(r,{label:"\u9009\u9879"},{default:s(()=>[u(k,{modelValue:l(e).option_ids,"onUpdate:modelValue":a[5]||(a[5]=t=>l(e).option_ids=t),options:l(W),placeholder:"\u9009\u62E9\u9898\u76EE\u9009\u9879",style:{width:"440px"},multiple:"",filterable:"",remote:"","remote-method":M},null,8,["modelValue","options"])]),_:1}),u(r,{label:"\u7B54\u6848"},{default:s(()=>[u(k,{modelValue:l(e).anser_ids,"onUpdate:modelValue":a[6]||(a[6]=t=>l(e).anser_ids=t),options:l(j),placeholder:"\u9009\u62E9\u9898\u76EE\u7B54\u6848",style:{width:"440px"},multiple:"","multiple-limit":l(e).type_tag==="S"?1:l(e).option_ids.length},null,8,["modelValue","options","multiple-limit"])]),_:1})]),_:1},8,["model"]),[[A,i.value===2]])]),B("div",Ee,[u(U,{onClick:a[7]||(a[7]=t=>i.value-=1),disabled:i.value===0},{default:s(()=>[ge]),_:1},8,["disabled"]),u(U,{type:"primary",onClick:z,disabled:i.value===3},{default:s(()=>[I(O(l(K)),1)]),_:1},8,["disabled"])])])])}}});var Me=re(fe,[["__scopeId","data-v-330a0ee7"]]);export{Me as default};
